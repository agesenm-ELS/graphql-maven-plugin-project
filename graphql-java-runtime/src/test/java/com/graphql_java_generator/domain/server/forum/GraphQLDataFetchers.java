/** Generated by the default template from graphql-java-generator */
package com.graphql_java_generator.domain.server.forum;

import java.util.List;
import java.util.Map;
import java.util.NoSuchElementException;
import java.util.UUID;
import java.util.concurrent.CompletableFuture;
import java.util.concurrent.CompletionStage;

import javax.annotation.Resource;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.dataloader.BatchLoader;
import org.dataloader.DataLoader;
import org.reactivestreams.Publisher;
import org.springframework.stereotype.Component;

import com.graphql_java_generator.util.GraphqlUtils;

import graphql.schema.DataFetcher;

import java.util.Date;

/**
 * @author generated by graphql-java-generator
 * @see <a href="https://github.com/graphql-java-generator/graphql-java-generator">https://github.com/graphql-java-generator/graphql-java-generator</a>
 */
@Component
public class GraphQLDataFetchers {

	/** The logger for this instance */
	protected Logger logger = LoggerFactory.getLogger(GraphQLDataFetchers.class);

	@Resource
	protected DataFetchersDelegateQueryType dataFetchersDelegateQueryType;

	@Resource
	protected DataFetchersDelegateMutationType dataFetchersDelegateMutationType;

	@Resource
	protected DataFetchersDelegateSubscriptionType dataFetchersDelegateSubscriptionType;

	@Resource
	protected DataFetchersDelegateBoard dataFetchersDelegateBoard;

	@Resource
	protected DataFetchersDelegateTopic dataFetchersDelegateTopic;

	@Resource
	protected DataFetchersDelegatePost dataFetchersDelegatePost;

	@Resource
	protected DataFetchersDelegateMember dataFetchersDelegateMember;

	@Resource
	protected GraphqlUtils graphqlUtils;

	////////////////////////////////////////////////////////////////////////////////////////////////
	// Data fetchers for DataFetchersDelegateQueryType
	////////////////////////////////////////////////////////////////////////////////////////////////

	public DataFetcher<List<Board>> dataFetchersDelegateQueryTypeBoards() {
		return dataFetchingEnvironment -> {
  
			List<Board> ret = dataFetchersDelegateQueryType.boards(dataFetchingEnvironment);
			logger.debug("boards: {} found rows", (ret==null) ? 0 : ret.size());

			return ret;
		};
	}


	public DataFetcher<Integer> dataFetchersDelegateQueryTypeNbBoards() {
		return dataFetchingEnvironment -> {
  
			Integer ret = null;
			try {
				ret = dataFetchersDelegateQueryType.nbBoards(dataFetchingEnvironment);
			} catch (NoSuchElementException e) {
				// There was no items in the Optional
			}

			if (ret != null)
				logger.debug("nbBoards: 1 result found");
			else
				logger.debug("nbBoards: no result found");

			return ret;
		};
	}


	public DataFetcher<List<Topic>> dataFetchersDelegateQueryTypeTopics() {
		return dataFetchingEnvironment -> {
			@SuppressWarnings("unchecked")
			String boardName = (String) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("boardName"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", String.class);
  
			List<Topic> ret = dataFetchersDelegateQueryType.topics(dataFetchingEnvironment, boardName);
			logger.debug("topics: {} found rows", (ret==null) ? 0 : ret.size());

			return ret;
		};
	}


	public DataFetcher<List<Topic>> dataFetchersDelegateQueryTypeFindTopics() {
		return dataFetchingEnvironment -> {
			@SuppressWarnings("unchecked")
			String boardName = (String) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("boardName"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", String.class);
			@SuppressWarnings("unchecked")
			List<String> keyword = (List<String>) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("keyword"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", String.class);
  
			List<Topic> ret = dataFetchersDelegateQueryType.findTopics(dataFetchingEnvironment, boardName, keyword);
			logger.debug("findTopics: {} found rows", (ret==null) ? 0 : ret.size());

			return ret;
		};
	}

	////////////////////////////////////////////////////////////////////////////////////////////////
	// Data fetchers for DataFetchersDelegateMutationType
	////////////////////////////////////////////////////////////////////////////////////////////////

	public DataFetcher<Board> dataFetchersDelegateMutationTypeCreateBoard() {
		return dataFetchingEnvironment -> {
			@SuppressWarnings("unchecked")
			String name = (String) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("name"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", String.class);
			@SuppressWarnings("unchecked")
			Boolean publiclyAvailable = (Boolean) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("publiclyAvailable"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", Boolean.class);
  
			Board ret = null;
			try {
				ret = dataFetchersDelegateMutationType.createBoard(dataFetchingEnvironment, name, publiclyAvailable);
			} catch (NoSuchElementException e) {
				// There was no items in the Optional
			}

			if (ret != null)
				logger.debug("createBoard: 1 result found");
			else
				logger.debug("createBoard: no result found");

			return ret;
		};
	}


	public DataFetcher<Topic> dataFetchersDelegateMutationTypeCreateTopic() {
		return dataFetchingEnvironment -> {
			@SuppressWarnings("unchecked")
			TopicInput topic = (TopicInput) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("topic"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", TopicInput.class);
  
			Topic ret = null;
			try {
				ret = dataFetchersDelegateMutationType.createTopic(dataFetchingEnvironment, topic);
			} catch (NoSuchElementException e) {
				// There was no items in the Optional
			}

			if (ret != null)
				logger.debug("createTopic: 1 result found");
			else
				logger.debug("createTopic: no result found");

			return ret;
		};
	}


	public DataFetcher<Post> dataFetchersDelegateMutationTypeCreatePost() {
		return dataFetchingEnvironment -> {
			@SuppressWarnings("unchecked")
			PostInput post = (PostInput) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("post"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", PostInput.class);
  
			Post ret = null;
			try {
				ret = dataFetchersDelegateMutationType.createPost(dataFetchingEnvironment, post);
			} catch (NoSuchElementException e) {
				// There was no items in the Optional
			}

			if (ret != null)
				logger.debug("createPost: 1 result found");
			else
				logger.debug("createPost: no result found");

			return ret;
		};
	}


	public DataFetcher<List<Post>> dataFetchersDelegateMutationTypeCreatePosts() {
		return dataFetchingEnvironment -> {
			@SuppressWarnings("unchecked")
			List<PostInput> spam = (List<PostInput>) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("spam"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", PostInput.class);
  
			List<Post> ret = dataFetchersDelegateMutationType.createPosts(dataFetchingEnvironment, spam);
			logger.debug("createPosts: {} found rows", (ret==null) ? 0 : ret.size());

			return ret;
		};
	}


	public DataFetcher<Member> dataFetchersDelegateMutationTypeCreateMember() {
		return dataFetchingEnvironment -> {
			@SuppressWarnings("unchecked")
			MemberInput input = (MemberInput) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("input"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", MemberInput.class);
  
			Member ret = null;
			try {
				ret = dataFetchersDelegateMutationType.createMember(dataFetchingEnvironment, input);
			} catch (NoSuchElementException e) {
				// There was no items in the Optional
			}

			if (ret != null)
				logger.debug("createMember: 1 result found");
			else
				logger.debug("createMember: no result found");

			return ret;
		};
	}

	////////////////////////////////////////////////////////////////////////////////////////////////
	// Data fetchers for DataFetchersDelegateSubscriptionType
	////////////////////////////////////////////////////////////////////////////////////////////////

	public DataFetcher<Publisher<Post>> dataFetchersDelegateSubscriptionTypeSubscribeToNewPost() {
		return dataFetchingEnvironment -> {
			@SuppressWarnings("unchecked")
			String boardName = (String) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("boardName"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", String.class);
  
			Publisher<Post> ret = null;
			try {
				ret = dataFetchersDelegateSubscriptionType.subscribeToNewPost(dataFetchingEnvironment, boardName);
			} catch (NoSuchElementException e) {
				// There was no items in the Optional
			}

			if (ret != null)
				logger.debug("subscribeToNewPost: 1 result found");
			else
				logger.debug("subscribeToNewPost: no result found");

			return ret;
		};
	}

	////////////////////////////////////////////////////////////////////////////////////////////////
	// Data fetchers for DataFetchersDelegateBoard
	////////////////////////////////////////////////////////////////////////////////////////////////

	public DataFetcher<List<Topic>> dataFetchersDelegateBoardTopics() {
		return dataFetchingEnvironment -> {
			@SuppressWarnings("unchecked")
			Date since = (Date) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("since"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", Date.class);
  			Board source = dataFetchingEnvironment.getSource();

			List<Topic> ret = dataFetchersDelegateBoard.topics(dataFetchingEnvironment, source, since);
			logger.debug("topics: {} found rows", (ret==null) ? 0 : ret.size());

			return ret;
		};
	}

	////////////////////////////////////////////////////////////////////////////////////////////////
	// Data fetchers for DataFetchersDelegateTopic
	////////////////////////////////////////////////////////////////////////////////////////////////

	public DataFetcher<CompletableFuture<Member>> dataFetchersDelegateTopicAuthorWithDataLoader() {
		return dataFetchingEnvironment -> {
  			Topic source = dataFetchingEnvironment.getSource();

			DataLoader<String, Member> dataLoader = dataFetchingEnvironment.getDataLoader("Member"); 
			
			// This dataLoader may be null. Let's handle that:
			if (dataLoader != null) { 
				return dataFetchersDelegateTopic.author(dataFetchingEnvironment, dataLoader, source);
			} else {
				logger.warn("No DataLoader found for key '{}'", "Member");
				return CompletableFuture.supplyAsync(
						() -> dataFetchersDelegateTopic.author(dataFetchingEnvironment, source));
			}
		};
	}


	public DataFetcher<List<Post>> dataFetchersDelegateTopicPosts() {
		return dataFetchingEnvironment -> {
			@SuppressWarnings("unchecked")
			String memberId = (String) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("memberId"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", String.class);
			@SuppressWarnings("unchecked")
			String memberName = (String) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("memberName"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", String.class);
			@SuppressWarnings("unchecked")
			Date since = (Date) graphqlUtils.getArgument(dataFetchingEnvironment.getArgument("since"), "${argument.type.graphQLTypeSimpleName}", "java.lang.String", Date.class);
  			Topic source = dataFetchingEnvironment.getSource();

			List<Post> ret = dataFetchersDelegateTopic.posts(dataFetchingEnvironment, source, memberId, memberName, since);
			logger.debug("posts: {} found rows", (ret==null) ? 0 : ret.size());

			return ret;
		};
	}

	////////////////////////////////////////////////////////////////////////////////////////////////
	// Data fetchers for DataFetchersDelegatePost
	////////////////////////////////////////////////////////////////////////////////////////////////

	public DataFetcher<CompletableFuture<Member>> dataFetchersDelegatePostAuthorWithDataLoader() {
		return dataFetchingEnvironment -> {
  			Post source = dataFetchingEnvironment.getSource();

			DataLoader<String, Member> dataLoader = dataFetchingEnvironment.getDataLoader("Member"); 
			
			// This dataLoader may be null. Let's handle that:
			if (dataLoader != null) { 
				return dataFetchersDelegatePost.author(dataFetchingEnvironment, dataLoader, source);
			} else {
				logger.warn("No DataLoader found for key '{}'", "Member");
				return CompletableFuture.supplyAsync(
						() -> dataFetchersDelegatePost.author(dataFetchingEnvironment, source));
			}
		};
	}

	////////////////////////////////////////////////////////////////////////////////////////////////
	// Data fetchers for DataFetchersDelegateMember
	////////////////////////////////////////////////////////////////////////////////////////////////
}
